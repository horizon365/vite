# Параметры SSR

Если не указано, варианты в этом разделе применяются как к DEV, так и к сборке.

## ssr.external

- **Тип:** `string [] | правда
- **Связанный:** [внешние виды SSR](/en/guide/ssr#ssr-externals)

Внезокзовать заданные зависимости и их переходные зависимости для SSR. По умолчанию все зависимости являются внешними, за исключением связанных зависимостей (для HMR). Если вы предпочитаете внешне связанную зависимость, вы можете передать его название этой опции.

Если `true` , все зависимости, включая связанные зависимости, являются внешними.

Обратите внимание, что явно перечисленные зависимости (с использованием типа `string[]` ) всегда будут иметь приоритет, если они также перечислены в `ssr.noExternal` (используя любой тип).

## ssr.noExternal

- **Тип:** `string | Regexp | (нить | Regexp) [] | правда
- **Связанный:** [внешние виды SSR](/en/guide/ssr#ssr-externals)

Предотвратить экстернализованную зависимость от SSR, которые они будут в комплекте в сборке. По умолчанию только связанные зависимости не являются внешними (для HMR). Если вы предпочитаете внешне связанную зависимость, вы можете передать его название с опцией `ssr.external` .

Если `true` , никаких зависимостей не является внешним. Тем не менее, зависимости, явно перечисленные в `ssr.external` (с использованием `string[]` типа), могут иметь приоритет и при этом быть экстернализованными. Если `ssr.target: 'node'` установлен, встроенные встроенные встроенные вкладки Node.js также будут экстернализированы по умолчанию.

Обратите внимание, что если настраиваются и `ssr.noExternal: true` , и `ssr.external: true` , `ssr.noExternal` принимают приоритет и никакие зависимости не являются внешними.

## ssr.target

- **Тип:** `'Узел' | 'WebWorker'
- **По умолчанию:** `node`

Создайте цель для сервера SSR.

## ssr.resolve.conditions

- **Тип:** `string[]`
- **По умолчанию:** `['Модуль',« Узел »,« Разработка|Производство '] ` (`DefaultServerConditions`) (`[' Module ',' Browser ',' Разработка|Производство ']` (`DefaultClientConditions`) for ` ssr.Target ===' WebWorker'`)
- **Связанный:** [условия разрешения](./shared-options.md#resolve-conditions)

Эти условия используются в трубопроводе плагина и только влияют на неэкстернализированные зависимости во время сборки SSR. Используйте `ssr.resolve.externalConditions` , чтобы повлиять на внешний импорт.

## ssr.resolve.externalConditions

- **Тип:** `string[]`
- **По умолчанию:** `['node']`

Условия, которые используются во время импорта SSR (включая `ssrLoadModule` ) внешних прямых зависимостей (внешние зависимости, импортируемые VITE).

:::tip

При использовании этой опции обязательно запустите узел с [`--conditions` флагом](https://nodejs.org/docs/latest/api/cli.html#-c-condition---conditionscondition) с одинаковыми значениями как в DEV, так и на Build, чтобы получить постоянное поведение.

Например, при настройке `['node', 'custom']` вы должны запустить `NODE_OPTIONS='--conditions custom' vite` в DEV и `NODE_OPTIONS="--conditions custom" node ./dist/server.js` после сборки.

:::

### ssr.resolve.mainFields

- **Тип:** `string[]`
- **По умолчанию:** `['module', 'jsnext:main', 'jsnext']`

Список полей в `package.json` , чтобы попробовать при разрешении точки входа пакета. Обратите внимание, что это требует более низкого приоритета, чем условный экспорт, разрешенный из поля `exports` : если точка входа успешно разрешена из `exports` , основное поле будет проигнорировано. Эта настройка влияет только на неэкстернатизированные зависимости.
